C51 COMPILER V9.53.0.0   TEMP                                                              10/31/2023 18:53:27 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE TEMP
OBJECT MODULE PLACED IN .\Objects\temp.obj
COMPILER INVOKED BY: D:\DWIN\Keil_v5\C51\BIN\C51.EXE source\temp.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\driver;.\sour
                    -ce) DEBUG OBJECTEXTEND CODE SYMBOLS PRINT(.\Listings\temp.lst) OBJECT(.\Objects\temp.obj)

line level    source

   1          #include "temp.h"
   2          #include "sys.h"
   3          #include "string.h"
   4          
   5          
   6          void draw_bottom_menu(void);
   7          void level_back(void);
   8          void do_nothing(void);
   9          
  10          menu_item_t cur_menu_items[40];
  11          menu_t cur_menu;
  12          
  13          
  14          u8 last_selected_menu_item;
  15          u8 prev_menu_item;
  16          
  17          code icon_id tig_icons[]       = {EIID_TIG, EIID_DC_PLUS, EIID_TRIG, EIID_PULSE_OFF, EIID_D_10, EIID_2T, E
             -IID_H2O_OFF}; //Ð¸ÐºÐ¾Ð½ÐºÐ¸ Ñ€Ð°ÐµÐ¶Ð¸Ð¼Ð¾Ð² Ð½Ð° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ Ð¿Ð°Ð½ÐµÐ»Ð¸
  18          code icon_id welding_mod_sel[] = {EIID_TIG, EIID_MMA, EIID_MIX};
  19          code icon_id weld_button_mod[] = {EIID_2T, EIID_4T, EIID_4T_PLUS};
  20          code icon_id polarity[] =        {EIID_DC_MINUS, EIID_DC_PLUS, EIID_AC};
  21          code icon_id ignition_type[] =   {EIID_HF, EIID_LIFT};
  22          code icon_id pulse_state[] =     {EIID_PULSE_OFF, EIID_PULSE_ON};
  23          code icon_id electrode_d[] =     {EIID_D_10, EIID_D_16, EIID_D_20, EIID_D_40};
  24          code icon_id flow_sensor[] =     {EIID_H2O_OFF, EIID_H2O_ON};
  25          
  26          
  27          idata menu_t bottom_menu = {0xff, }
  28          
  29          
  30          
  31          
  32          
  33          
  34          
  35          
  36          
  37          void draw_icons(u16 vp, menu_t *p_menu)
*** ERROR C141 IN LINE 37 OF source\temp.c: syntax error near 'void'
  38          {
*** ERROR C134 IN LINE 38 OF source\temp.c: '_draw_icons': mspace on function not permitted
*** ERROR C141 IN LINE 38 OF source\temp.c: syntax error near '{'
  39              u8 i, j;
  40              u16 cmd[100];
  41              cmd[0] = 0x2407; //icon_write_instruction      
*** ERROR C136 IN LINE 41 OF source\temp.c: invalid dimension size: [0]
*** ERROR C231 IN LINE 41 OF source\temp.c: 'cmd': redefinition
  42              cmd[1] = p_menu->size; //display_icon_cnt
*** ERROR C279 IN LINE 42 OF source\temp.c: 'cmd': multiple initialization
*** ERROR C202 IN LINE 42 OF source\temp.c: 'p_menu': undefined identifier
  43              j = 2;
*** ERROR C231 IN LINE 43 OF source\temp.c: 'j': redefinition
*** ERROR C231 IN LINE 43 OF source\temp.c: 'j': redefinition
  44              for(i = 0; i < p_menu->size; i++) {
C51 COMPILER V9.53.0.0   TEMP                                                              10/31/2023 18:53:27 PAGE 2   

*** ERROR C141 IN LINE 44 OF source\temp.c: syntax error near 'for'
*** ERROR C141 IN LINE 44 OF source\temp.c: syntax error near '=', expected ')'
*** ERROR C129 IN LINE 44 OF source\temp.c: missing ';' before '<'
  45                  if(p_menu->p_items[i].icon == EIID_NO_ICON) { //ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸ Ð½ÐµÐ´Ð¾Ð±Ð°Ð²Ð»Ñ
             -Ñ‚ÑŒ ÐµÐµ Ðº Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑŽ
  46                      continue;
  47                  }
  48                  cmd[j] = p_menu->p_items[i].t_rect.x0;
  49                  j++;
  50                  cmd[j] = p_menu->p_items[i].t_rect.y0;
  51                  j++;
  52                  cmd[j] = p_menu->p_items[i].icon;
  53                  j++;
  54              }
  55              cmd[j] = 0xFF00;
  56              write_dgus_vp(vp, (u8*)&cmd, j);
  57          }
  58          
  59          
  60          void make_layer_tig(void);
  61          
  62          void tig_layer_response_(void)
  63          {
  64              
  65              switch (expression)
  66              {
  67              case /* constant-expression */:
  68                  /* code */
  69                  break;
  70              
  71              default:
  72                  break;
  73              }
  74              
  75              tig_icons[prev_menu_item] =  cur_menu_items[last_selected_menu_item].icon;
  76              make_layer_tig(); 
  77          }
  78          
  79          void tig_layer_response(void)
  80          {
  81              code icon_id *all_icons[] = {welding_mod_sel, weld_button_mod, polarity, ignition_type, pulse_state, e
             -lectrode_d, flow_sensor};
  82          
  83              const u16 icon_rect_sz = 100;
  84              u16 start_x = 0;
  85              u16 start_y = 600;
  86              u8 i;
  87              icon_id *p_icons;
  88          
  89          
  90              if(last_selected_menu_item == 7) {
  91                  return;
  92              }
  93          
  94              prev_menu_item = last_selected_menu_item;
  95          
  96              cur_menu.size = all_icons[last_selected_menu_item][0]; 
  97              p_icons = &all_icons[last_selected_menu_item][1];
  98          
  99              start_x = 100 * last_selected_menu_item;
 100          
 101              cur_menu.func = tig_layer_response_;
C51 COMPILER V9.53.0.0   TEMP                                                              10/31/2023 18:53:27 PAGE 3   

 102              for(i = 0; i < cur_menu.size; i++) {
 103                  cur_menu_items[i].icon = p_icons[i];
 104                  cur_menu_items[i].t_rect.x0 = start_x;
 105                  cur_menu_items[i].t_rect.y0 = start_y;
 106                  cur_menu_items[i].t_rect.x1 = start_x + icon_rect_sz;
 107                  cur_menu_items[i].t_rect.y1 = start_y + icon_rect_sz;
 108                  start_y -= 100;
 109              }
 110          
 111              draw_icons(0x9500, &cur_menu);   
 112          }
 113          
 114          void make_layer_tig(void)
 115          {    
 116              u8 i;
 117              
 118              const u16 icon_rect_sz = 100;
 119              
 120              u16 start_x = 0;
 121              u16 start_y = 700;
 122              
 123              {//clear vertical menu
 124                  u16 tmp = 0x0000;
 125                  write_dgus_vp(0x9500, (u8*)&tmp, 1); 
 126              }
 127          
 128              for(i = 0; i < cur_menu.size; i++) {
 129                  if((bit_mask & 0x01) == 0x01) {
 130                          cur_menu_items[i].icon = tig_icons[i];
 131                          cur_menu_items[i].t_rect.x0 = start_x;
 132                          cur_menu_items[i].t_rect.y0 = start_y;
 133                          cur_menu_items[i].t_rect.x1 = start_x + icon_rect_sz;
 134                          cur_menu_items[i].t_rect.y1 = start_y + icon_rect_sz;
 135                  }
 136          
 137             
 138                  start_x += 100;
 139              }
 140          
 141              draw_icons(0x9000, &cur_menu);        
 142          }
 143          void draw_bottom_menu(void)
 144          {   
 145              //draw_menu(0x9000, &bottom_menu);
 146              make_layer_tig();      
 147          }
 148          
 149          
 150          
 151          
 152          
 153          
 154          
 155          void draw_sub_menu(void)
 156          {
 157              // prev_menu_item = last_selected_menu_item;
 158              // draw_menu(0x9500, array_of_menus[last_selected_menu_item]);  
 159          }
 160          
 161          // void do_nothing(void)
 162          // { 
 163          //     u16 tmp = 0x0000;
C51 COMPILER V9.53.0.0   TEMP                                                              10/31/2023 18:53:27 PAGE 4   

 164          //     write_dgus_vp(0x9500, (u8*)&tmp, 1); //clear vertical menu
 165          //     bottom_menu.p_items[prev_menu_item].icon.id = p_cur_menu->p_items[last_selected_menu_item].icon.id;
 166          //     draw_bottom_menu();    
 167          // }
 168          
 169          
 170          void level_back(void)
 171          {
 172              // u16 tmp = 0x0000;
 173              // write_dgus_vp(0x9500, (u8*)&tmp, 1); //clear vertical menu
 174              // draw_bottom_menu();
 175          }
 176          
 177          
 178          
 179          
 180          
 181          
 182          //mma menu
 183          
 184          
 185          
 186          
 187          
 188          
 189          
 190          
 191          
 192          
 193          
 194          
 195          
 196          
 197          
 198          
 199          
 200          
 201          
 202          
 203          
 204          
 205          
 206          
 207          
 208          //    struct{
 209              //         u8 icon_library;
 210              //         u8 icon_write_instruction;
 211              //         u16 display_icon_cnt;
 212              //         ICON_T bottom_icons[11];
 213              //         u16 terminator;
 214              //     } temp = {
 215              //         36,
 216              //         0x07,
 217              //         11,//icon cnt
 218              //         {
 219              //             {0,   700, EIID_TIG},
 220              //             {100, 700, EIID_MMA},
 221              //             {200, 700, 2},
 222              //             {300, 700, EIID_MIX},
 223              //             {400, 700, EIID_2T},
 224              //             {500, 700, EIID_4T},
 225              //             {600, 700, EIID_4T_PLUS},
C51 COMPILER V9.53.0.0   TEMP                                                              10/31/2023 18:53:27 PAGE 5   

 226              //             {700, 700, EIID_TRAP},
 227              //             {800, 700, EIID_SIN},
 228              //             {900, 700, EIID_4T_PLUS},
 229              //             {100, 700, EIID_DC_MINUS},
 230              //         },   
 231              //         0xFF00,
 232              //     };   
 233                  
 234              //     write_dgus_vp(0x9000, (u8*) &temp, sizeof(temp) / 2); 

C51 COMPILATION COMPLETE.  0 WARNING(S),  12 ERROR(S)
